---
title: "Setting Tempo"
description: "How to set the tempo in OpenMarch"
---

import { Steps } from "@astrojs/starlight/components";
import { YouTube } from "astro-embed";
import { LinkCard, CardGrid, Aside } from "@astrojs/starlight/components";
import {
  MusicNotesIcon,
  RewindIcon,
  TrashIcon,
  PencilSimpleIcon,
  PlayIcon,
  PauseIcon,
} from "@phosphor-icons/react";

Defining tempos in OpenMarch is how we keep the drill aligned with the music.

Tempo and timing data **sits on top of** the music file you import.
Once there's timing data in a show, pages can be lined up the music effortlessly, without having to worry about timestamps or manual alignment.
We give you a handful of ways to customize and tweak the timing data to your liking, so you can start designing your drill as fast as possible.

There are two ways to define tempos -

<CardGrid>
  <LinkCard
    title="Manually inputting tempo groups"
    icon="seti:happenings"
    href="#manually-inputting-tempo-groups"
  />
  <LinkCard
    title="Importing a MusicXML file"
    icon="seti:happenings"
    href="#importing-a-musicxml-file"
    description="Experimental"
  />
</CardGrid>

## Tempo groups

### What is a tempo group?

Tempo groups are collections of measures that have the same time signature and tempo

Groups that have the same time signature and tempo are combined into a single group, unless the second group has a name. (I.e. `A` or `Closer`)

### Creating tempo

<iframe
  style={{ width: "100%", height: "100%", aspectRatio: "16/9" }}
  src="https://www.youtube.com/embed/xWWkSjg_wn0?si=IdmGtlGkj9SmGp7s&amp;start=40"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerpolicy="strict-origin-when-cross-origin"
  allowfullscreen
></iframe>

#### Manually creating a new tempo group

Open the <span style={{ display: "inline-flex", gap: "0.25rem" }}><MusicNotesIcon /> </span> `Music` tab and you will see the following form -

![Creating a new tempo group](/docs/guides/music/new-tempo-group.png)

When creating a tempo group, you have the following options -

- **Name**: An optional identifier used to differentiate the tempo in the timeline.
  - This is useful for rehearsal marks like `A` or `Closer`
- **Start tempo**: Beats per minute (BPM) that the tempo group starts at
- **End tempo**: Beats per minute (BPM) that the tempo group ends at
  - This is optional and will default to the start tempo if not provided
- **Beats per measure**: The number of beats in each measure. Or, the time signature's numerator
  - I.e. a time signature of `4/4` has 4 beats per measure
  - See [Mixed meters](#mixed-meters) for information on how to handle mixed meters
- **Number of measures**: The amount of times this tempo group should repeat
  - Note, if an `End tempo` is provided, this will stretch the tempo change over the number of measures

##### Mixed meters

<Steps>

1. Set the `Beats per measure` to a number greater than or equal to 5
1. Click `Make mixed meter`
1. Choose a `Beat Pattern`

</Steps>

![Making a mixed meter](/docs/guides/music/mixed-meter.gif)

A few notes on mixed meters:

- The tempo defined in the `Start tempo` represents the **quarter note's** BPM
  - I.e. a tempo of `144` means the quarter note is 120 BPM and the dotted quarter note is 180 BPM
- Tempo changes with mixed meters are not automatically calculated
  - This is why you cannot set the `End tempo` for a mixed meter tempo group
  - You can manually define the tempo change by editing the tempo group and adjusting each beat's tempo
- The only supported mixed meters are meters that mix any pattern of `2` and `3` eighth note groupings
  - You may go all the way up to `30/8`, if you every want a mixed meter of `3+2+3+3+3+3+3+2+3+2+3` or any other permutation

#### Importing a MusicXML file

<Aside type="caution" title="Experimental">

Importing a `MusicXML` file is in it's early stages and may not work for all files.
This is especially problematic for files with mixed meters and complicated time signatures.

</Aside>

To import a `MusicXML` file, follow these steps:

<Steps>

1. Open the <span style={{ display: "inline-flex", gap: "0.25rem" }}><MusicNotesIcon /> </span> `Music` tab
1. Select `Import MusicXML`
1. From the file popup, select the `MusicXML` file you want to import
1. You should see the tempo groups populate in the `Tempo` tab and beats in the timeline!

</Steps>

![Importing a MusicXML file example](/docs/guides/music/import-musicxml.gif)

#### Tapping tempo

<iframe
  style={{ width: "100%", height: "100%", aspectRatio: "16/9" }}
  src="https://www.youtube.com/embed/xWWkSjg_wn0?si=JgAKDFbR8CDGfJyi&amp;start=472"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerpolicy="strict-origin-when-cross-origin"
  allowfullscreen
></iframe>

<Aside type="danger" title="Very experimental">

`Tap tempo` is in it's extreme early stages.
It works, but the user experience will likely be tedious and frustrating.

Please let us know if you find the tap-tempo feature useful, as we aren't predicting that many people will use it.

</Aside>

Tempo tapping is not very polished and is currently _all-or-nothing._
You must tap all in one shot and will need to start over if you make a mistake or need to edit.

<Steps>

1. Press the <span style={{ display: "inline-flex", gap: "0.25rem" }}><PencilSimpleIcon /> </span> `Edit` button in the timeline
1. Click `Tap new tempo` to delete all existing beats and start fresh
1. Start at the beginning of the audio by pressing <span style={{ display: "inline-flex", gap: "0.25rem" }}><RewindIcon /> </span> `Rewind`
1. Play the audio by pressing <span style={{ display: "inline-flex", gap: "0.25rem" }}><PlayIcon /> </span> `Play` or <kbd>Space</kbd>
1. Tap the tempo
   - Use the number keys `[1-9]` to tap the tempo
   - Press the number that corresponds to the beats in the measure, or the time signature's numerator
   - For example in `4/4` time, press the <kbd>4</kbd> key
   - Press the key at the downbeat of each measure
1. Pause the audio by pressing <span style={{ display: "inline-flex", gap: "0.25rem" }}><PauseIcon /> </span> `Pause` or <kbd>Space</kbd>
1. You have three options:
   - Save the new beats by pressing `Save`
   - Retry the tap tempo process by pressing `Restart`
   - Cancel and go back to your old beats by pressing `Exit`

</Steps>

![Tap tempo example](/docs/guides/music/tap-tempo.gif)

<Aside type="note" title="All keyboard shortcuts are disabled during tap tempo">

Keyboard shortcuts like `Ctrl + R` are disabled during tap tempo.

To exit the tap tempo session at any time and cancel the process, press <kbd>Esc</kbd>.

</Aside>

### Editing tempo

<iframe
  style={{ width: "100%", height: "100%", aspectRatio: "16/9" }}
  src="https://www.youtube.com/embed/xWWkSjg_wn0?si=g8Dyu3K5LxZgWgI2&amp;start=312"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerpolicy="strict-origin-when-cross-origin"
  allowfullscreen
></iframe>

<Aside type="caution" title="Editing limitation">

Currently, only the `Name` and `Start tempo` can be edited in the tempo group editor.
To have more precise editing, follow the instructions in the [Fine-grained tempo editing](#fine-grained-tempo-editing-on-the-timeline) section.

</Aside>

#### Simple Groups

**Simple groups** are tempo groups that maintain a consistent tempo.
These can be mixed or simple meters.

![Editing a simple tempo group](/docs/guides/music/simple-group-edit.gif)

#### Custom groups

**Custom groups** are groups where each beat's tempo is defined individually.
These groups are always a single measure.

![Editing a custom tempo group](/docs/guides/music/custom-group-edit.gif)

### Deleting a tempo group

To delete a tempo group, simply click the trash <span style={{ display: "inline-flex", gap: "0.25rem" }}><TrashIcon /> </span> icon in the tempo group's menu.
When you see the confirmation dialog, click `Delete` to delete the tempo group.

<Aside type="caution" title="Deleting tempo groups">

Deleting a tempo group will delete all of the pages that use that tempo group.
This can be undone, but still proceed with caution.

We are working on a better way! (Issue [#512](https://github.com/OpenMarch/OpenMarch/issues/512))

</Aside>

## Fine-grained tempo editing on the timeline

Often, the tempo group editor may not give you enough options to get the tempo you want, especially after you've already put a bunch of tempo groups in.
To get your timing exactly right, you can click on the beats in the timeline to adjust the duration of each one, or add/delete individual beats.
For measures, you can add or delete measures or change the rehearsal mark.
Any measure can have a rehearsal mark for easy identification. (E.g. `A`, `Closer`, etc.)

> From a development standpoint, this is difficult because of the complexity with how pages attach to beats.
> This is likely a solvable issue, but there are many edge cases to consider.
>
> This fine-grained editor should be enough for most use cases. But, as always, let us know if you have any suggestions!

For the following examples, we'll assume we made a handful of tempo groups and are now trying to fine-tune the timing:

- **Start** - 32 Measure of 4/4 at 120 BPM
- **Letter B** - 16 Measure of 4/4 at 132 BPM -
- **Letter C** - 16 Measure of 4/4 at 180 BPM -

![Example tempo groups](/docs/guides/music/example-tempo-groups.png)

### Adding or removing a rehearsal mark

Notice how we forgot to add **Letter A** to the tempo groups, and now we can't easily edit it.
Assuming **Letter A** is at measure 17, we can right click on the measure in the timeline and change the rehearsal mark to **A**.

![Adding a rehearsal mark](/docs/guides/music/add-rehearsal-mark.gif)

Now, if we look in the tempo group editor, we can see that **Letter A** has been added to the tempo groups:

![Example tempo groups with rehearsal mark](/docs/guides/music/tempo-after-letter-a.png)

The same process can be used to add or remove a rehearsal mark for any measure:

![Removing a rehearsal mark](/docs/guides/music/remove-rehearsal-mark.gif)

### Adding or deleting measures

To add or delete a measure, click on the measure in the timeline and select "Add measure" or "Delete measure".
This will delete the measure and all of the beats that belong to it.

![Adding or deleting a measure](/docs/guides/music/add-or-delete-measure.gif)

Notice how the measure numbers after **Letter A** have been incremented by 1, signifying that a new measure has been added.

#### Deleting a measure with a page that starts on it

**Note** - you cannot delete measures if a page _starts_ on that measure or any of the beats in the measure.
To delete these, you must first delete the page that starts on that measure or its beats.

<Aside type="note" title="'Starts on' can be a bit confusing">

A page that "starts on" beat is the page that _will begin_ to play when the beat is reached.

E.g. I'm viewing `Page 3` which ended on `Measure 8`, and I'm about to play `Page 3A`which is 6 counts long.
In this case,`Page 3A`would start on`Measure 8`. Meaning, if I want to delete `Measure 8`, I must first delete `Page 3A`.

The GIFs below illustrate this example.

</Aside>

![Deleting a measure with a page that starts on it](/docs/guides/music/delete-measure-on-page.gif)

The same is true for pages that start in the middle of a measure:

![Deleting a page that starts in the middle of a measure](/docs/guides/music/delete-page-in-middle-of-measure.gif)

### Adding or deleting an individual beat

If you need to just add a single beat, rather than an entire measure, you can do so by clicking on any beat within a measure that isn't the first beat and pressing the `Add Beat` button.
The beat that is added will be the same tempo as the beat you clicked on.

To remove a single beat, simply click on a beat that isn't the first beat in a measure and press the trash <span style={{ display: "inline-flex", gap: "0.25rem" }}><TrashIcon /> </span> icon.
The restriction of a page starting on a beat is still in place.

![Adding or deleting an individual beat](/docs/guides/music/add-or-delete-individual-beat.gif)

### Adjusting the tempo of a beat

To adjust the duration or tempo of a beat, click on the beat in the timeline and adjust the tempo.
Press <kbd>Enter</kbd> to save the changes or <kbd>Esc</kbd> to cancel.

![Adjusting the tempo of a beat](/docs/guides/music/adjust-beat-tempo.gif)

Notice in the `Tempo Group` editor, this measure has turned into a "Custom" group.
This happens when not all beats in the measure have the same tempo.

![Custom tempo group](/docs/guides/music/custom-tempo-group-example.png)

<Aside type="note" title="You can only edit one beat at a time on the timeline">

Whether you're in the middle of a measure or on the start of it, editing the tempo of a beat will only edit _that_ beat, not the whole measure or the beats around it.

To adjust the tempo of one or many measures, use the `Tempo Group` editor - [editing Tempo Groups](#editing-tempo)

</Aside>

### Converting a beat to a measure and vice versa

Measures are really just flags that say "this beat is the start of a measure".
This means, you can define a new measure by adding a measure marking to a beat.

In a similar vein, you can convert a measure to a beat by removing the measure marking from the beat.
**Note** - turning a measure with a rehearsal mark into a beat will remove the rehearsal mark.

![Converting between beats and measures](/docs/guides/music/convert-between-beat-and-measure.gif)

## Toggling the Metronome

To toggle the metronome, click the metronome icon in the sidebar, find General, and toggle "On/Off". Alternatively, you can toggle the metronome by clicking the metronome icon in the Timeline palette in the bottom-left corner.

![Toggling the Metronome](/docs/guides/music/toggle-metronome.gif)

## How does timing data work under the hood?

When it comes to tempo and timing OpenMarch has one goal - **make it easy for you, the designer, to line up your pages with the music.**
To achieve this mission while keeping things simple, OpenMarch only stores timing data in the form of `Beats`.
Each `Beat` has a duration in seconds.
Adding up the durations of the `Beats` in the show is how we get the timestamps.

You might think "why not just store tempos with flags at certain tempo changes?"
This was the original implementation we had, but we found that it had too many edge cases and was too complex to maintain.

This `Beat` system is much simpler from a development perspective and can easily be abstracted into digestible tempo representations for the designer.
I.e. during a gradual tempo change, designers have absolute control over how each beat changes over time

## FAQs

<details>
  <summary>What about time signatures like `2/2`, `3/2`, etc?</summary>
  <p>
    OpenMarch *doesn't actually care* what the time signature's denominator is.
    It just cares about the `Beats per measure` (or time signature's numerator).

    With this, you can define a `3/2` in the same way you would define a `3/4` time signature.
    All you need to do in this case is set the `Start tempo` to whatever you the half note's BPM is

<Aside type="tip" title="Fun fact">

The only information that OpenMarch stores is the number of seconds that each beat is. I.e. `TEMPO BPM` divided by 60.

For example, 120 BPM would be `0.5` seconds per beat, and 80 BPM would be `0.75` seconds per beat.
This is why you can define a `3/2` time signature as a `3/4` time signature and expect the same result.

</Aside>

  </p>
</details>

<details>
  <summary>I made a mistake! How do I change the number of measures in a tempo group?</summary>
  <p>
    Currently, you can't :(

    What you can do in the meantime is delete the old tempo group and create a new one with the correct number of measures.

    We are working on a better way! (Issue [#512](https://github.com/OpenMarch/OpenMarch/issues/512))

  </p>
</details>

<details>
  <summary>Can I add tempo groups in between existing tempo groups?</summary>
  <p>
  Yes! Just press the `+` button in the tempo group's menu.

![Adding a tempo group in between existing tempo groups](/docs/guides/music/in-between-add.gif)

  </p>
</details>
